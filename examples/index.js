!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,(()=>(()=>{"use strict";var e={819:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CustomBindHandler=t.customHandlers=t.HTMLBindHandler=void 0;var r=n(593),i=n(290),a=n(838),o=n(601),s=n(596),l=["if","foreach","class","style","attr","else","reanimate","event"],u=function(){function e(e){switch(this.dependencies=[],this.type=e.type,this.element=e.element,this.result=null,this.expression=e.expression,this.attribute=e.attribute,this.type){case"if":this.replaceForMarker(this.type),this.checkIfElse();break;case"foreach":this.checkIndex(),this.replaceForMarker(this.type)}!this.RequiresAttr(this.type)&&this.element.getAttribute&&this.attribute&&this.element.getAttribute(this.attribute)&&this.element.removeAttribute(this.attribute)}return e.prototype.compute=function(e){if(this.element.isConnected)try{return c[this.type](this,e)}catch(e){var t=this.outerHTML?this.outerHTML:this.element.outerHTML;throw new Error("\nCouldn't compute HTMLBindHandler.\n\n          \nexpression: ".concat(this.expression,"\n\n          \n").concat(t,"\n\n          \n").concat(e.message,"\n"))}},e.prototype.assignDependencies=function(e,t){var n=this;return this.dependencies=t?this.dependencies:[],e.forEach((function(e){(0,r.isPathUsedInExpression)(e,n.expression)&&n.dependencies.push(e)})),this.dependencies},e.prototype.checkIfElse=function(){if(this.element.nextElementSibling&&this.element.nextElementSibling.hasAttribute(":else")){var e=this.element.nextElementSibling;e.removeAttribute(":else"),this.helperHTML=e.outerHTML,this.element.nextElementSibling.remove()}},e.prototype.checkIndex=function(){this.element.hasAttribute(":index")&&(this.helperHTML="true",this.element.removeAttribute(":index"))},e.prototype.RequiresAttr=function(e){return-1===l.indexOf(e)},e.prototype.replaceForMarker=function(e){this.markerStart=new Comment("".concat(e,": start")),this.markerEnd=new Comment("".concat(e,": end")),this.element.removeAttribute(":".concat(e)),this.outerHTML=this.element.outerHTML,this.originalNode=this.element.cloneNode(!0),this.element.replaceWith(this.markerStart),this.element=this.markerStart,this.element.after(this.markerEnd)},e}();t.HTMLBindHandler=u;var c={event:function(e,t){e.attribute in e.element&&(e.element[e.attribute]=function(){(0,r.evaluateDOMExpression)(e.expression,t)})},innerhtml:function(e,t){e.result=(0,r.evaluateDOMExpression)(e.expression,t),e.element.innerHTML=String(e.result)},innertext:function(e,t){e.result=(0,r.evaluateDOMExpression)(e.expression,t),e.element.innerText=String(e.result)},interpolation:function(e,t){e.element.textContent=(0,r.interpolateText)(e.expression,t)},class:s.ClassBindHandler,style:function(e,t){var n=e.attribute&&e.attribute.split(o.BindingChar)||[];if(n.length>2){e.result=(0,r.evaluateDOMExpression)(e.expression,t);var i=(0,r.snakeToCamel)(n[2]);e.element.style[i]=String(e.result)}else e.result=(0,r.evaluateDOMExpression)(e.expression,t)||{},Object.keys(e.result).forEach((function(t){e.element.style&&void 0!==e.element.style[t]&&(e.element.style[t]=e.result[t])}))},attr:function(e,n){var i,a=(null===(i=e.attribute)||void 0===i?void 0:i.split(o.BindingChar)[1])||"";if(a&&(e.result=(0,r.evaluateDOMExpression)(e.expression,n),e.element.setAttribute(a,String(e.result||""))),e.isCustom)return t.customHandlers[e.isCustom](e,n)},reanimate:function(e,t){e.result=(0,r.evaluateDOMExpression)(e.expression,t),e.result!==e.previous&&(e.element.style.animation="none",setTimeout((function(){return e.element.style.animation=""})),e.previous=e.result)},if:a.IfBindHandler,else:a.ElseHandler,foreach:i.ForEachBindHandler,index:i.IndexHandler};t.customHandlers={},t.CustomBindHandler=function(e,n){if(c[e])throw new Error("Can't add custom bind handler name: \"".concat(e,"\" since it already exists :(\n\n    If you feel like the bind handler doesn't do what you need, feel free to add a pull/feature request at: \n\n    https://github.com/DavidMunozMartinez/bindrjs/issues\n"));t.customHandlers[e]=n}},596:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ClassBindHandler=void 0;var r=n(593),i=n(601);t.ClassBindHandler=function(e,t){var n=e.attribute&&e.attribute.split(i.BindingChar)||[];if(n.length>2){var a=n[2];if(e.result=Boolean((0,r.evaluateDOMExpression)(e.expression,t)),e.result===e.previous)return;var o=String(a),s=e.result,l=e.element.classList,u=l.contains(o),c=s&&!u?"add":!s&&u?"remove":null;c&&l[c](o),e.previous=e.result}else{e.result=(0,r.evaluateDOMExpression)(e.expression,t);var d=String(e.result),p=String(e.previous);p&&d!==p&&e.element.classList.contains(p)&&e.element.classList.remove(p),d&&(e.element.classList.add(d),e.previous=d)}}},290:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IndexHandler=t.ForEachBindHandler=void 0;var r=n(593),i=n(601);function a(e,t,n){var i=(0,r.evaluateDOMExpression)(t.arrayVar,n)||[],a=[];return e.tracking=[],i.forEach((function(n,r){var i,s,l=o(e,t,r);a.push(l),null===(i=e.markerEnd)||void 0===i||i.before(l),null===(s=e.tracking)||void 0===s||s.push(n)})),a}function o(e,t,n){var a,o=null===(a=e.originalNode)||void 0===a?void 0:a.cloneNode(!0);return(0,r.recurseElementNodes)(o,(function(e){var r;switch(e.nodeType){case 1:e.getAttributeNames().filter((function(e){return 0===e.indexOf(i.BindingChar)})).forEach((function(r){var i=e.getAttribute(r)||"";i.indexOf(t.localVar)>-1&&(i=s(i,t,n)),t.usesIndex&&i.indexOf(":index")>-1&&(i=i.replaceAll(":index",n)),e.setAttribute(r,i)}));break;case 3:e.textContent=(null===(r=e.textContent)||void 0===r?void 0:r.replace(i.InterpolationRegexp,(function(e,r){var i=s(r,t,n);return t.usesIndex&&i.indexOf(":index")>-1&&(i=i.replaceAll(":index",n)),"${".concat(i,"}")})))||null}})),o}function s(e,t,n){var i="".concat(t.arrayVar,"[").concat(n,"]");return(0,r.findAndReplaceVariable)(e,t.localVar,i)}t.ForEachBindHandler=function(e,t){var n=!1;if(!e.outerHTML)return n;e.tracking||(e.tracking=[]);var i=function(e){var t=e.expression.split(" in ").map((function(e){return e.trim()}));return{localVar:t[0],arrayVar:t[1],usesIndex:Boolean(e.helperHTML)}}(e);e.result=(0,r.evaluateDOMExpression)(i.arrayVar,t)||[];var s="re-render",l=[];if(null===s)return n;switch(n=[],s){case"re-render":(0,r.clearMarkerContents)(e),n=a(e,i,t);break;case"add":n=function(e,t,n,i){var s,l=[];if(1===i.length&&i[0]===e.result.length-1){var u=o(e,t,i[0]);l=[u],null===(s=e.markerEnd)||void 0===s||s.before(u),e.tracking&&e.tracking.push(e.result[i[0]])}else(0,r.clearMarkerContents)(e),l=a(e,t,n);return l}(e,i,t,l);break;case"remove":n=function(e,t,n,i){return(0,r.clearMarkerContents)(e),a(e,t,n)}(e,i,t)}return n},t.IndexHandler=function(){throw new Error("Invalid use of :index handler, can only be used in an element which uses :foreach handler")}},838:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ElseHandler=t.IfBindHandler=void 0;var r=n(593);t.IfBindHandler=function(e,t){var n=!1;if(!e.outerHTML)return n;e.result=Boolean((0,r.evaluateDOMExpression)(e.expression,t));var i=e.result?e.outerHTML:e.helperHTML;if(e.result!==e.previous&&((0,r.clearMarkerContents)(e),i)){var a=document.createElement("div");a.innerHTML=i,e.element.after(a.children[0]),n=e.element.nextElementSibling}return e.previous=e.result,n?[n]:n},t.ElseHandler=function(){throw new Error("Invalid use of :else handler, can only be used next to an :if handler")}},665:function(e,t){var n=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.BindValues=t.BindHTMLValues=t.BindCodeTypeValues=void 0,t.BindCodeTypeValues=["if","else","foreach","index","reanimate"],t.BindHTMLValues=["event","innerhtml","innertext","interpolation","class","attr","style"],t.BindValues=r(r([],n(t.BindHTMLValues),!1),n(t.BindCodeTypeValues),!1)},449:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Bind=void 0;var r=n(819),i=n(665),a=n(593),o=n(601),s=n(244),l=function(){function e(e){var t=this;this.DOMBindHandlers=[],this.dataDependencies={},this.id=e.id,this.ready=e.ready,this.templateRendered=e.templateRendered||function(){},this.templateBinded=e.templateBinded||function(){},e.onChange&&(this.onChange=e.onChange);var n,r=document.getElementById(this.id);if(e.template&&(n=this.validateTemplate(e.template)),this._reactive=new s.ReactiveData(e.bind||{}),this._reactive.onUpdate((function(e){t.onDataChange(e)})),this.bind=this._reactive.reactive,!r)throw new Error("Could not initialize renderer, container not found");this.container=r,n?n.then((function(e){t.container.innerHTML=e,t.initTemplate.apply(t)})):this.initTemplate.apply(this)}return e.prototype.initTemplate=function(){var e=this,t=this;this.templateRendered(),this.defineBinds(),setTimeout((function(){e.templateBinded(),e.ready&&e.ready.apply(t.bind)}))},e.prototype.onDataChange=function(e){var t=this,n=this.buildPathFromChanges(e),r=this._reactive.flatData.filter((function(e){return e.indexOf(n)>-1&&e!==n}));if(e.isNew){var i=e.path+=isNaN(e.property)?".".concat(e.property):"[".concat(e.property,"]"),o=this._reactive.flatData.filter((function(e){return(0,a.isPathUsedInExpression)(i,e)}));this.DOMBindHandlers.forEach((function(e){var n=e.dependencies.length;e.assignDependencies(o,!0),n<e.dependencies.length&&t.computeAndRebind([e],!0)}))}this.computeHandlersForData(n),r.forEach((function(e){return t.computeHandlersForData(e)})),this.onChange&&this.onChange(e)},e.prototype.buildPathFromChanges=function(e){var t=e.pathArray;return 1!==e.pathArray.length&&isNaN(e.pathArray[e.pathArray.length-1])&&"length"!==e.property||(t=e.pathArray.concat(e.property)),t.reduce((function(e,t){return e+(isNaN(t)?".".concat(t):"[".concat(t,"]"))}))},e.prototype.computeHandlersForData=function(e){var t=this,n=this.dataDependencies[e]||[],r=[];n&&n.forEach((function(e){e.element.isConnected?t.computeAndRebind([e]):r.push(e)})),r.forEach((function(n){var r=t.dataDependencies[e].indexOf(n);t.dataDependencies[e].splice(r,1)}))},e.prototype.defineBinds=function(e){this.DOMBindHandlers=this.getTemplateBinds(e)},e.prototype.getTemplateBinds=function(e){var t=this;e=e||this.container;var n=this.getConnectedHandlers(),r=[],i=[];(0,a.recurseElementNodes)(e,(function(e){if(!n.get(e)&&e.isConnected)switch(e.nodeType){case 1:t.getAttrBindsFromElement(e,(function(e){":innerhtml"===e.attribute?(e.compute(t.bind),i.push(e)):r.push(e)}));break;case 3:t.getInterpolationBindsFromElement(e,(function(e){t.computeAndRebind([e]),i.push(e)}))}})),this.computeAndRebind(r);var o=i.concat(r);return this.DOMBindHandlers.concat(o)},e.prototype.getConnectedHandlers=function(){for(var e=new Map,t=this.DOMBindHandlers.length-1;t>=0;){var n=this.DOMBindHandlers[t].element;n.isConnected?e.set(n,!0):this.DOMBindHandlers.splice(t,1),t--}return e},e.prototype.computeAndRebind=function(e,t){var n=this,r=[];e.forEach((function(e){var i=e.compute(n.bind),a=e.dependencies;t||(a=e.assignDependencies(n._reactive.flatData)),a.forEach((function(t){var r=n.dataDependencies[t]||[];-1===r.indexOf(e)&&r.push(e),n.dataDependencies[t]=r})),i&&(r=r.concat(i))})),r.length&&r.forEach((function(e){return n.defineBinds(e)}))},e.prototype.getAttrBindsFromElement=function(e,t){var n=e.hasAttribute(":if"),a=e.hasAttribute(":foreach"),s=n||a;return e.getAttributeNames().filter((function(e){return e.indexOf(o.BindingChar)>-1&&!s||s&&":if"===e||":foreach"===e})).map((function(n){var a=n.split(o.BindingChar)[1],s=i.BindValues[i.BindValues.indexOf(a)];s||0!==a.indexOf("on")||(s="event");var l=new r.HTMLBindHandler({type:s||"attr",element:e,expression:e.getAttribute(n)||"",attribute:"event"===s?a:n});return r.customHandlers[a]&&(l.isCustom=a),t(l),l}))},e.prototype.getInterpolationBindsFromElement=function(e,t){if(e.nodeValue&&e.nodeValue.trim())for(var n=e.nodeValue.matchAll(/\${(.*?)}/gm),i=n.next();!i.done;){var a=new r.HTMLBindHandler({type:"interpolation",element:e,expression:i.value.input||"",attribute:null});i=n.next(),t(a)}},e.prototype.validateTemplate=function(e){return new Promise((function(t,n){e.indexOf(".html")>-1?fetch(e).then((function(e){return e.text()})).then((function(e){t(e)})):t(e)}))},e}();t.Bind=l},244:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ReactiveData=void 0;var n=function(){function e(e){var t=this;this.flatData=[],this.reactive=this._reactive(e,(function(e){t._onUpdate&&t._onUpdate(e)}))}return e.prototype.onUpdate=function(e){this._onUpdate=e},e.prototype._reactive=function(e,t){return this._reactiveDeep(e,t)},e.prototype._reactiveDeep=function(e,t,n,i){var a=this;return void 0===n&&(n="this"),void 0===i&&(i=["this"]),e.__proto__.__isProxy=!0,void 0!==e.length&&this.flatData.push(n+".length"),Object.keys(e).forEach((function(o){var s=e[o],l=n+(isNaN(o)?".".concat(o):"[".concat(o,"]")),u=i.concat(o);(function(e){return"function"==typeof e})(s)||-1!==a.flatData.indexOf(l)||a.flatData.push(l),r(s)&&(e[o]=a._reactiveDeep(s,t,l,u))})),new Proxy(e,this._handler(n,i,t))},e.prototype._handler=function(e,t,n){var i=this;return{get:function(e,t,n){return e[t]},set:function(a,o,s){var l=a[o],u=s;if(a.__proto__&&o in a.__proto__&&"length"!==o)return a[o]=s,!0;var c,d={path:e,pathArray:t,property:o,oldValue:l,newValue:u,isNew:void 0===l},p=e,f=t;return d.isNew&&"function"!=typeof s&&!r(s)&&(p=e+(isNaN(d.property)?".".concat(o):"[".concat(o,"]")),f=t.concat(o),-1===i.flatData.indexOf(p)&&i.flatData.push(p)),r(s)?(p=e+(isNaN(d.property)?".".concat(o):"[".concat(o,"]")),f=t.concat(o),-1===i.flatData.indexOf(p)&&i.flatData.push(p),s=void 0!==(c=s).length?Object.assign([],c):Object.assign({},c),a[o]=i._reactiveDeep(s,n,p,f)):a[o]=s,n&&n(d),!0},deleteProperty:function(r,a){var o=r[a],s={path:e,pathArray:t,property:a,oldValue:o,newValue:void 0,isNew:void 0===o},l=e+(isNaN(s.property)?".".concat(a):"[".concat(a,"]")),u=i.flatData.indexOf(l);if(u>-1){var c=Object.values(r[a]).length;i.flatData.splice(u,c+1)}return a in r&&delete r[a],void 0!==r.length&&(r.length-=1),n&&n(s),!0}}},e}();function r(e){return"object"==typeof e&&null!==e&&"function"!=typeof e}t.ReactiveData=n},601:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BindingChar=t.InterpolationRegexp=void 0,t.InterpolationRegexp=/\${(.*?)}/gm,t.BindingChar=":"},593:function(e,t,n){var r=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.snakeToCamel=t.isPathUsedInExpression=t.clearMarkerContents=t.findAndReplaceVariable=t.interpolateText=t.recurseElementNodes=t.evaluateDOMExpression=void 0;var a=n(601);function o(e,t){var n=-1===e.indexOf("return");return new Function("\n    ".concat(n?"return":""," ").concat(e,";\n  ")).apply(t)}t.evaluateDOMExpression=o,t.recurseElementNodes=function e(t,n,r){r||n(t);for(var i=0;i<t.childNodes.length;i++)e(t.childNodes[i],n)},t.interpolateText=function(e,t){for(var n=e.matchAll(a.InterpolationRegexp),r=n.next(),i=e;!r.done;){var s=String(o(r.value[1],t));i=i.replace(r.value[0],s),r=n.next()}return i};var s=["-","+","*","/","!","<",">"],l=["]","."],u=i([" ","\n","",'"',"'","[","("],r(s),!1),c=i([" ","","[","(",".","]",")"],r(s),!1);t.findAndReplaceVariable=function(e,t,n){var a=new RegExp("\\b".concat(t,"\\b"),"g"),o=i([],r(e.matchAll(a)),!1),s=e,d=[];return o.forEach((function(n){for(var r=n.index||0,i=r+t.length,a=r>=1&&e[r-1]||"",o=e[i]||"",s=-1===l.indexOf(a)&&u.indexOf(a)>-1,p=c.indexOf(o)>-1,f=0,h=0,v=r;v>=0;)'"'===e[v]&&h++,"'"===e[v]&&f++,v--;s&&p&&f%2==0&&h%2==0&&d.unshift(r)})),d.forEach((function(e){s="".concat(s.substring(0,e)).concat(n).concat(s.substring(e+t.length,s.length))})),s},t.clearMarkerContents=function(e){var t;if(8===e.element.nodeType)for(;e.element.nextSibling!==e.markerEnd;)null===(t=e.element.nextSibling)||void 0===t||t.remove()};var d=[" ","\n",")","<",">","[","]","{","}","+","-","*","/","=","!","?",";","|","&",void 0];t.isPathUsedInExpression=function(e,t){var n=!1,r=t.indexOf(e);if(r>-1&&d.indexOf(t[r+e.length])>-1){var i=t[r+e.length],a=d.indexOf(i)>-1,o="["===i,s=!isNaN(t[r+e.length+1]);n=a&&!o||o&&!s}return n},t.snakeToCamel=function(e){return e.toLowerCase().replace(/([-][a-z])/g,(function(e){return e.toUpperCase().replace("-","")}))}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}var r={};return(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.CustomBindHandler=e.Bind=void 0;var t=n(449);Object.defineProperty(e,"Bind",{enumerable:!0,get:function(){return t.Bind}});var i,a=n(819);Object.defineProperty(e,"CustomBindHandler",{enumerable:!0,get:function(){return a.CustomBindHandler}}),(i=window).Bind=t.Bind,i.CustomBindHandler=a.CustomBindHandler})(),r})()));
//# sourceMappingURL=index.js.map